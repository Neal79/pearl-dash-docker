# Docker Environment Variables for Pearl Dashboard
# These variables are used by docker-compose.yml

# Network Configuration
DOCKER_NETWORK_NAME=pearlnet
DOCKER_NETWORK_SUBNET=172.20.0.0/16


# Application Configuration
APP_NAME="Pearl Dashboard"
NODE_ENV=production
APP_URL=https://localhost
VITE_APP_URL=https://localhost
APP_ENV=production
APP_KEY=base64:YsRmKlfhdGHaUrMZMKEtRLxXvGCZp5qavT1fomklc0o=
APP_DEBUG=false
SESSION_SECURE_COOKIE=false
SESSION_DOMAIN=localhost
SKIP_MIGRATIONS=false
PEARL_TESTING_BUILD=true

# User ID and Group ID for proper file permissions
UID=1000
GID=1000

# Database Configuration (already defined in backend/.env but needed here for services)
DB_HOST=db
DB_PORT=3306
DB_DATABASE=pearl_dash
DB_USERNAME=pearldashuser
DB_PASSWORD=YFpewuDD7Ly27gT9D6hyW2UY959YuipKXmG0WWg2fWD48zpC0LwCmp3svCc51ZkNJQ3DRPEwqVpVBDZwh2

# JWT Configuration (from backend/.env)
JWT_SECRET=HIUvGs056j3ojIvCPaBBSg5vfxwcnyGxykyIrQHzB0ayLBZXtcJulRHHQFm33tQz

# Service Keys
REALTIME_SERVICE_KEY=realtime_service_key_2024_secure

# Audio Meter Service Configuration
AUDIO_METER_MAX_CONNECTIONS=150
MAX_CONNECTIONS_PER_IP=20
# Note: Keep your original allowed devices - Docker will preserve client IPs
ALLOWED_AUDIO_DEVICES=192.168.42.0/23,192.168.43.0/24

# Real-time Service Configuration  
REALTIME_MAX_CONNECTIONS_PER_IP=25
REALTIME_MAX_SUBSCRIPTIONS=50
REALTIME_MAX_QUEUE_SIZE=100
REALTIME_CLEANUP_INTERVAL=60000
REALTIME_BACKEND_POLL=5000
REALTIME_BACKEND_ENDPOINT=https://nginx/api/internal/realtime/events

# Pearl Device Polling Configuration
PEARL_DEVICE_IP=192.168.43.20
PEARL_DEVICE_USERNAME=admin
PEARL_DEVICE_PASSWORD=ds75019
PEARL_API_ENDPOINT=/api/v2.0/channels?ids=&publishers=true&publishers-status=true&publishers-settings=true&encoders=true&active_layout=true

# Container Name Configuration for Service Communication
NGINX_CONTAINER_NAME=pearl-nginx-testing

# Tiered Polling System Configuration
# Fast tier: Critical real-time data (publisher status, recorder status, device health)
PEARL_FAST_POLL_INTERVAL=1
# Medium tier: Semi-static configuration data (channels, publisher names)
PEARL_MEDIUM_POLL_INTERVAL=15
# Slow tier: Static system information (system identity, system status)
PEARL_SLOW_POLL_INTERVAL=30
# API timeout for all Pearl device requests
PEARL_POLL_TIMEOUT=10

LOG_LEVEL=info

# Preview Image Service Configuration
PREVIEW_IMAGE_REFRESH_RATE=15
PREVIEW_IMAGE_FRONTEND_REFRESH_RATE=15
PREVIEW_IMAGE_RESOLUTION=auto
#only jpeg currently supported
PREVIEW_IMAGE_FORMAT=jpg
PREVIEW_IMAGE_KEEP_ASPECT_RATIO=true
# Hardware protection - exponential backoff for failed requests
PREVIEW_IMAGE_MAX_BACKOFF_DELAY=300
PREVIEW_IMAGE_BACKOFF_MULTIPLIER=2
# Zombie subscription prevention
PREVIEW_IMAGE_SUBSCRIPTION_TIMEOUT=300
PREVIEW_IMAGE_HEARTBEAT_INTERVAL=60
